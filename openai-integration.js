// OpenAI Integration
async function generateWithOpenAI(niche, platform, prompt, count, lang, style, contentType) {
  const t = translations[lang];
  
  const systemPrompt = `Tu es un expert en cr√©ation de contenu UGC (User Generated Content). 
Cr√©e ${count} scripts vid√©o ${contentType} complets et uniques pour:
- Niche: ${niche}
- Platform: ${platform}
- Style: ${style}
- Langue: ${lang}
- Description produit: ${prompt}

Sois cr√©atif, authentique et viral-friendly. Format chaque script avec: Hook, Body, CTA, et Conseils Pro.`;

  try {
    const response = await fetch('/api/generate-ugc', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ prompt: systemPrompt })
    });
    
    if (!response.ok) throw new Error('API Error');
    const data = await response.json();
    
    return `
<h2 style="color:#667eea;margin-bottom:20px;">‚ú® ${count} ${t.scripts_generated}</h2>
<div style="background:rgba(30,15,50,0.8);padding:20px;border-radius:10px;margin-bottom:20px;">
  <p><strong>${t.platform}:</strong> ${platform}</p>
  <p><strong>${t.niche}:</strong> ${niche}</p>
  <p><strong>Style:</strong> ${style}</p>
</div>
<div style="background:rgba(168,85,247,0.1);padding:20px;border-radius:10px;margin-bottom:20px;">
  <h3>ü§ñ Generated by OpenAI GPT-4</h3>
  <p style="white-space:pre-wrap;font-family:monospace;font-size:14px;">${data.content}</p>
</div>
    `;
  } catch (error) {
    return `<p style="color:red;">‚ùå Error: ${error.message}</p>`;
  }
}
